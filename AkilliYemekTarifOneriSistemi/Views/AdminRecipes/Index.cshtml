@model List<AkilliYemekTarifOneriSistemi.Models.Recipe>

@{
    Layout = "~/Views/Shared/_AdminLayout.cshtml";
    var search = ViewBag.Search as string;
}

<h2 class="mb-3"> Tarifler</h2>

@if (TempData["SuccessMessage"] != null)
{
    <div class="alert alert-success">@TempData["SuccessMessage"]</div>
}

<div class="d-flex justify-content-between align-items-center mb-3">
    <a asp-action="Create" class="btn btn-success">
         Yeni Tarif
    </a>
    <form asp-action="AutoAssignMealTags" method="post" class="ms-2">
        @Html.AntiForgeryToken()
        <button type="submit" class="btn btn-warning">
             MealTags Otomatik Ata
        </button>
    </form>

    <form method="get" asp-action="Index" class="d-flex gap-2">
        <input name="search"
               value="@search"
               class="form-control"
               style="max-width:280px"
               placeholder="Tarif ara..." />
        <button class="btn btn-outline-dark">Ara</button>
        <a asp-action="Index" class="btn btn-outline-secondary">Sýfýrla</a>
    </form>
</div>

<table class="table table-bordered table-hover align-middle">
    <thead class="table-light">
        <tr>
            <th>Baþlýk</th>
            <th>Süre (dk)</th>
            <th>Kalori</th>
            <th style="width:320px">Ýþlemler</th>
        </tr>
    </thead>
    <tbody>
        @foreach (var r in Model)
        {
            <tr>
                <td class="fw-semibold">@r.Title</td>

                <td>@r.CookingTime</td>

                <td>
                    @(r.NutritionFacts != null ? Math.Round(r.NutritionFacts.Calories, 0) : 0) kcal
                </td>

                <td class="d-flex gap-1 flex-wrap">
                    <a asp-action="Edit"
                       asp-route-id="@r.Id"
                       class="btn btn-warning btn-sm">
                        Düzenle
                    </a>

                    <a asp-controller="AdminRecipeIngredients"
                       asp-action="Index"
                       asp-route-recipeId="@r.Id"
                       class="btn btn-info btn-sm">
                         Malzemeler
                    </a>

                    <a asp-action="Delete"
                       asp-route-id="@r.Id"
                       class="btn btn-danger btn-sm">
                        Sil
                    </a>
                </td>
            </tr>
        }
    </tbody>
</table>
